import{d as h,u as _,a as g,_ as f,c as r,b as s,t as a,p as m,F as v,j as p,o as d,q as y}from"./index-D9UNCaBM.js";const b=h({name:"StatsView",computed:{itemsStore(){return g()},friendsStore(){return _()},allItems(){return this.itemsStore.items||[]},totalItems(){return this.allItems.length},activeItemsCount(){return this.allItems.filter(e=>e.status!=="returned").length},overdueItemsCount(){return this.allItems.filter(e=>e.status==="overdue").length},totalValueSum(){return this.allItems.reduce((e,t)=>e+(Number(t.value)||0),0)},itemsByCategory(){const e={};return this.allItems.forEach(t=>{const i=t.category||"ine";e[i]=(e[i]||0)+1}),e},displayTopFriends(){return(this.friendsStore.friends||[]).map(t=>{const i=this.allItems.filter(n=>{const l=n.friendId===t.id,u=n.friend&&n.friend.id===t.id,o=n.friend&&n.friend.name===t.name;return l||u||o});return{...t,borrowedCount:i.length,totalValue:i.reduce((n,l)=>n+(Number(l.value)||0),0)}}).sort((t,i)=>i.borrowedCount-t.borrowedCount).slice(0,5)}},mounted(){this.itemsStore.loadFromLocalStorage(),this.friendsStore.loadFromLocalStorage(),typeof this.friendsStore.updateAllStats=="function"&&this.friendsStore.updateAllStats()},methods:{getCategoryName(e){return{elektronika:"ðŸ’» Elektronika",knihy:"ðŸ“š Knihy",naradie:"ðŸ”¨ NÃ¡radie",sport:"âš½ Å port",ine:"ðŸ“¦ InÃ©"}[e]||e}}}),k={class:"stats-view"},I={class:"stats-grid"},S={class:"stat-card main-stat"},C={class:"stat-info"},F={class:"stat-value"},N={class:"stat-card main-stat"},w={class:"stat-info"},V={class:"stat-value"},B={class:"stat-card main-stat"},T={class:"stat-info"},$={class:"stat-value danger"},z={class:"stat-card main-stat"},A={class:"stat-info"},E={class:"stat-value"},L={class:"details-grid"},j={class:"content-card"},D={class:"category-list"},P={key:0,class:"empty-mini"},q={class:"item-main"},K={class:"category-name"},O={class:"progress-bar-bg"},Z={class:"count-badge"},G={class:"content-card"},H={class:"friends-list"},J={key:0,class:"empty-mini"},M={class:"friend-rank"},Q={class:"rank-number"},R={class:"friend-avatar-mini"},U={class:"friend-name"},W={class:"friend-stats-brief"},X={class:"badge blue"},Y={class:"badge gray"};function x(e,t,i,n,l,u){return d(),r("div",k,[t[10]||(t[10]=s("div",{class:"header"},[s("h1",null,"Å tatistiky a prehÄ¾ady"),s("p",{class:"subtitle"},"DetailnÃ½ pohÄ¾ad na vaÅ¡e poÅ¾iÄanÃ© veci a aktivitu priateÄ¾ov")],-1)),s("div",I,[s("div",S,[t[1]||(t[1]=s("div",{class:"stat-icon blue"},"ðŸ“Š",-1)),s("div",C,[t[0]||(t[0]=s("span",{class:"stat-label"},"CelkovÃ½ poÄet",-1)),s("span",F,a(e.totalItems),1)])]),s("div",N,[t[3]||(t[3]=s("div",{class:"stat-icon green"},"ðŸ“¦",-1)),s("div",w,[t[2]||(t[2]=s("span",{class:"stat-label"},"AktÃ­vne",-1)),s("span",V,a(e.activeItemsCount),1)])]),s("div",B,[t[5]||(t[5]=s("div",{class:"stat-icon red"},"âš ï¸",-1)),s("div",T,[t[4]||(t[4]=s("span",{class:"stat-label"},"Po termÃ­ne",-1)),s("span",$,a(e.overdueItemsCount),1)])]),s("div",z,[t[7]||(t[7]=s("div",{class:"stat-icon gold"},"ðŸ’°",-1)),s("div",A,[t[6]||(t[6]=s("span",{class:"stat-label"},"CelkovÃ¡ hodnota",-1)),s("span",E,a(e.totalValueSum)+" â‚¬",1)])])]),s("div",L,[s("div",j,[t[8]||(t[8]=s("div",{class:"card-header"},[s("h2",null,"ðŸ“¦ PodÄ¾a kategÃ³rie")],-1)),s("div",D,[Object.keys(e.itemsByCategory).length===0?(d(),r("div",P," Å½iadne kategÃ³rie na zobrazenie ")):m("",!0),(d(!0),r(v,null,p(e.itemsByCategory,(o,c)=>(d(),r("div",{key:c,class:"list-item"},[s("div",q,[s("span",K,a(e.getCategoryName(c)),1),s("div",O,[s("div",{class:"progress-bar-fill",style:y({width:o/e.totalItems*100+"%"})},null,4)])]),s("span",Z,a(o),1)]))),128))])]),s("div",G,[t[9]||(t[9]=s("div",{class:"card-header"},[s("h2",null,"ðŸ† Top priatelia")],-1)),s("div",H,[e.displayTopFriends.length===0?(d(),r("div",J," ZatiaÄ¾ tu nie sÃº Å¾iadni priatelia ")):m("",!0),(d(!0),r(v,null,p(e.displayTopFriends,(o,c)=>(d(),r("div",{key:o.id,class:"list-item"},[s("div",M,[s("span",Q,"#"+a(c+1),1),s("div",R,a(o.name[0]),1),s("span",U,a(o.name),1)]),s("div",W,[s("span",X,a(o.borrowedCount)+" ks",1),s("span",Y,a(o.totalValue)+" â‚¬",1)])]))),128))])])])])}const ts=f(b,[["render",x],["__scopeId","data-v-9f5652d3"]]);export{ts as default};
